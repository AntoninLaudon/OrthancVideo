version: '3.1'  # Secrets are only available since this version of Docker Compose
services:
  orthanc:
    image: osimis/orthanc
    build:
      context: .
      dockerfile: Dockerfile
    command: /run/secrets/  # Path to the configuration files (stored as secrets)
    volumes:
      - "/Users/theophilushomawoo/Documents/stage/galeo/python/MIPGenerator.py:/python/plugin.py:ro"
      - "/Users/theophilushomawoo/Documents/stage/galeo/python/requirements.txt:/python/requirements.txt:ro"
    ports:
      - 4242:4242
      - 8042:8042
    secrets:
      - orthanc.json
    environment:
       ORTHANC__NAME: "orthanc"
       ORTHANC__PYTHON_SCRIPT: "/python/plugin.py"
       VERBOSE_ENABLED: "true"
       VERBOSE_STARTUP: "true"
       ORTHANC__PYTHON_VERBOSE: "true"
secrets:
  orthanc.json:
    file: orthanc.json
